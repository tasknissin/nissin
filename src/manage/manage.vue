<template lang="html">
  <div class="managePage">
    <el-container>
      <el-aside width="200px" style="background-color: rgb(238, 241, 246)">
      <!--左侧菜单组件-->
        <el-menu
          :default-active="isId"
          @select="handleSelect"
          class="el-menu-vertical-demo"
          background-color="#F0F6F6"
          text-color="#3C3F41"
          active-text-color="#f60">
          <NavMenu :navMenus="totalList"></NavMenu>
        </el-menu>
      </el-aside>
      <el-container>
        <el-main>
          <router-view></router-view>
        </el-main>
      </el-container>
    </el-container>
  </div>
</template>
<script>
import config from './config'
import NavMenu from './leftSidebar.vue';
export default {
  data() {
    return{
      totalList:[],
      isId:"部门管理"
    }

  },
  methods: {
    handleSelect(key,keyPath){
      console.log(key,keyPath)
    }
  },
  components: {
                NavMenu
    },
   beforeRouteEnter (to, from, next) {
      console.log("我从哪里来",to.params.id,from)
      var self = this
      next(vm=>{
        vm.isId = to.params.id
      })
    },
 watch:{
     $route(to,from){
        this.isId = to.params.id
     }
   },
  created(){
    this.totalList = config.childs
  },
}
</script>

<style lang="scss">
.managePage{
  height:calc(100% - 48px);
}
.el-main {
    padding: 0px;
}
.el-left{
width:15% !important;
background-color: white
}
.el-right{
width:80%;
background-color: white
}
.el-container {
  width:100%;
}
.el-menu-item,.el-submenu__title {
    margin-bottom: 1px;
    }


</style>
